[toc]

# äº‹ä»¶è¿‡æ»¤

äº‹ä»¶è¿‡æ»¤æ˜¯å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¯ä»¥å¯¹ä¸åŒå¯¹è±¡ï¼Œå®ç°ä¸åŒæ“ä½œï¼Œä»¥è¾¾åˆ°ç­›é€‰çš„æ•ˆæœã€‚

æ­¥éª¤ï¼š

1ã€é¦–å…ˆå®‰è£…ä¸€ä¸ªäº‹ä»¶è¿‡æ»¤å™¨

```cpp
//ç»™m_label123å®‰è£…äº‹ä»¶è¿‡æ»¤ï¼ŒæŒ‡å®š(this)å½“å‰æ•´ä¸ªçª—ä½“ç›‘è§†æˆ‘ä»¬çš„äº‹ä»¶å¯¹è±¡
m_label1->installEventFilter(this);
m_label2->installEventFilter(this);
m_label3->installEventFilter(this);
```

2ã€é‡å†™bool eventFilter([QObject](https://so.csdn.net/so/search?q=QObject&spm=1001.2101.3001.7020) *obj, QEvent *event)ã€‚

```cpp
//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›‘è§†å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶
bool EventFilter::eventFilter(QObject *watched, QEvent *event)
{
    QMatrix matrix;
    QImage tmpImg;
    //æ”¾å¤§å›¾ç‰‡
    matrix.scale(2.0,2.0);

    if(watched == m_label1)
    {
        //é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
        if(event->type() == QEvent::MouseButtonPress)
        {
            QMouseEvent* mouseEvent = (QMouseEvent*)event;
            if(mouseEvent->buttons()&Qt::LeftButton)
            {
                m_stateLabel->setText(QStringLiteral("å·¦é”®æŒ‰ä¸‹å›¾ç‰‡1"));
            }
            if(mouseEvent->buttons()&Qt::MidButton)
            {
                m_stateLabel->setText(QStringLiteral("ä¸­é”®æŒ‰ä¸‹å›¾ç‰‡1"));
            }
            if(mouseEvent->buttons()&Qt::RightButton)
            {
                m_stateLabel->setText(QStringLiteral("å³é”®æŒ‰ä¸‹å›¾ç‰‡1"));
            }

            tmpImg = m_image1.transformed(matrix);
            m_label1->setPixmap(QPixmap::fromImage(tmpImg));
        }

        if(event->type()==QEvent::MouseButtonRelease)
        {
            m_stateLabel->setText(QStringLiteral("é¼ æ ‡é‡Šæ”¾å›¾ç‰‡1"));
            m_label1->setPixmap(QPixmap::fromImage(m_image1));
        }
    }
    else if(watched == m_label2)
    {
        //é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
        if(event->type() == QEvent::MouseButtonPress)
        {
            QMouseEvent* mouseEvent = (QMouseEvent*)event;
            if(mouseEvent->buttons()&Qt::LeftButton)
            {
                m_stateLabel->setText(QStringLiteral("å·¦é”®æŒ‰ä¸‹å›¾ç‰‡2"));
            }
            if(mouseEvent->buttons()&Qt::MidButton)
            {
                m_stateLabel->setText(QString("ä¸­é”®æŒ‰ä¸‹å›¾ç‰‡2"));
            }
            if(mouseEvent->buttons()&Qt::RightButton)
            {
                m_stateLabel->setText(QString("å³é”®æŒ‰ä¸‹å›¾ç‰‡2"));
            }

            tmpImg = m_image2.transformed(matrix);
            m_label2->setPixmap(QPixmap::fromImage(tmpImg));
        }

        if(event->type()==QEvent::MouseButtonRelease)
        {
            m_stateLabel->setText(QStringLiteral("é¼ æ ‡é‡Šæ”¾å›¾ç‰‡2"));
            m_label2->setPixmap(QPixmap::fromImage(m_image2));
        }
    }
    else if(watched == m_label3)
    {
        //é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
        if(event->type() == QEvent::MouseButtonPress)
        {
            QMouseEvent* mouseEvent = (QMouseEvent*)event;
            if(mouseEvent->buttons()&Qt::LeftButton)
            {
                m_stateLabel->setText(QStringLiteral("å·¦é”®æŒ‰ä¸‹å›¾ç‰‡3"));
            }
            if(mouseEvent->buttons()&Qt::MidButton)
            {
                m_stateLabel->setText(QStringLiteral("ä¸­é”®æŒ‰ä¸‹å›¾ç‰‡3"));
            }
            if(mouseEvent->buttons()&Qt::RightButton)
            {
                m_stateLabel->setText(QStringLiteral("å³é”®æŒ‰ä¸‹å›¾ç‰‡3"));
            }

            tmpImg = m_image3.transformed(matrix);
            m_label3->setPixmap(QPixmap::fromImage(tmpImg));
        }

        if(event->type()==QEvent::MouseButtonRelease)
        {
            m_stateLabel->setText(QStringLiteral("é¼ æ ‡é‡Šæ”¾å›¾ç‰‡3"));
            m_label3->setPixmap(QPixmap::fromImage(m_image3));
        }
    }

    //å°†äº‹ä»¶äº¤ç»™ä¸Šå±‚å¯¹è¯æ¡†è¿›è¡Œå¤„ç†
    return QDialog::eventFilter(watched,event);
}

```

æœ€ç»ˆçš„å®ç°æ•ˆæœå°±æ˜¯ğŸ‘‡(ç‚¹å‡»å¯¹åº”å›¾ç‰‡å°±ä¼šå¯¹å›¾ç‰‡è¿›è¡Œæ”¾å¤§ï¼Œå¹¶ä¸”çŠ¶æ€æ ‡ç­¾ä¼šè¿›è¡Œæç¤º)

![image](../../qtqq_images/eventFilter.png)